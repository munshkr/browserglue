<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>browserglue example</title>
    </head>
    <body>

    </body>
    <script src="browserglue.js"></script>
    <script type="text/javascript">
        var client = new browserglue.Client('ws://localhost:8000');

        console.log("Add socket udp:13455")
        client.addSocket(13455).then(socket => {
            // Handle messages
            socket.on(message => {
                console.log("Message from udp:13455", message);
            });

            // Remove socket after 5 seconds
            setTimeout(async () => {
                console.log("Remove socket udp:13455");
                client.removeSocket(13455);
                const sockets = await client.listSockets();
                console.log("Current sockets:", sockets);
            }, 5000);

            // Remove all sockets after 7 seconds
            setTimeout(async () => {
                console.log("Remove *all* sockets");
                client.removeAllSockets();
                const sockets = await client.listSockets();
                console.log("Current sockets:", sockets);
            }, 7000);
        });

        // Add another socket
        console.log("Add socket udp:13459")
        client.addSocket(13459);

        // List all sockets
        client.listSockets().then(sockets => console.log("Current sockets:", sockets));
    </script>
</html>
